\documentclass{beamer}
\usepackage{graphicx}
\usepackage{amsmath, amsthm, amsfonts, amssymb, mathrsfs, mathtools, caption, subcaption}
\usepackage{textcomp} % straigth apos
\usepackage{tikz}
\usepackage{verbatim}
\usepackage{listings}
\usepackage[ruled,vlined, linesnumbered]{algorithm2e}
\usepackage{algorithmic,float}
\usepackage[
  % audience=short
  audience=long
]{beameraudience}

\usetikzlibrary {arrows.meta,automata,positioning} 
\usetikzlibrary{automata}

\usefonttheme{serif}

\theoremstyle{definition}

\setbeamercovered{invisible}

\setbeamertemplate{theorems}[numbered]
\setbeamertemplate{lemma}[numbered]
\newtheorem{remark}{Remark}

\usetheme{Madrid}
\useoutertheme{tree} % Alternatively: miniframes, infolines, split
\useinnertheme{circles}


\setbeamertemplate{headline}
{%
  \leavevmode%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.5ex,dp=1.125ex]{section in head/foot}%
    \hbox to .5\paperwidth{\hfil\insertsectionhead\hfil}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.5ex,dp=1.125ex]{subsection in head/foot}%
    \hbox to .5\paperwidth{\hfil\insertsubsectionhead\hfil}
  \end{beamercolorbox}%
}

\setbeamertemplate{section in toc}{%
  \inserttocsectionnumber.~\inserttocsection}
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=structure}
\setbeamertemplate{subsection in toc}{%
  \hspace{1.2em}{\tiny\inserttocsectionnumber.\inserttocsubsectionnumber}~\small\inserttocsubsection\par}

\setbeamertemplate{footline}{} % Remove footer
\setbeamertemplate{navigation symbols}{} % Remove navigation symbols


% \setbeamertemplate{bibliography item}{\insertbiblabel.~\insertbibitem}

\definecolor{maincolor}{RGB}{78, 145, 94}

\usecolortheme[named=maincolor]{structure}

\title[End-of-studies internship]{Verification in Isabelle/HOL of Hopcroft’s algorithm for minimizing DFAs including runtime analysis}
\author[V. Trélat]{
    Vincent Trélat\\
    \small{supervised by Prof. Dr. Tobias Nipkow and Dr. Peter Lammich}
}
\institute[TUM]{Technical University of Munich\\Chair for Logic and Verification}
\date{September 2023}

\newcommand{\prompt}[1]{vtrelat@home:\raisebox{0.5ex}{\texttildelow}\$ #1}

% Outline:
% - Life in Munich
% - TUM and the Chair for Logic and Verification
%     - Teaching
%     - Research : Isabelle
% - Introduce the internship
%     - The algorithm
%     - Verification of correctness
%     - Verification of time complexity


\begin{document}

\begin{frame}
\begin{figure}
\centering
\hfill
\includegraphics[height=9mm]{../img/logoartem.png}\hfill
\includegraphics[height=9mm]{../img/logoTUM.png}\hfill
\includegraphics[height=9mm]{../img/logoisabelle.png}\hfill
\hfill
\end{figure}
\titlepage
\end{frame}

\begin{frame}
    \frametitle{Outline}
    \tableofcontents
\end{frame}

\section{Living in Munich}
\subsection{The city}

\begin{frame}
    \only<1>{
    \begin{figure}
        \centering
        \includegraphics[width=0.7\textwidth]{img/map.png}
        \caption{Location of Munich}
    \end{figure}
    }
    \only<2>{
    \begin{figure}
        \centering
        \includegraphics[height=4cm]{img/munich1.jpeg}
        \includegraphics[height=4cm]{img/munich2.jpeg}
        \vfill
        \includegraphics[height=4cm]{img/munich3.jpeg}
        \caption{Some photos of Munich}
    \end{figure}
    }
\end{frame}

\subsection{Technical University of Munich}

\begin{frame}
    \only<1>{
    \begin{figure}
        \includegraphics[width=\textwidth]{img/TUM_aerial.png}
        \caption{Technical University of Munich (TUM), Garching campus}
    \end{figure}
    }
    \only<2>{
    \begin{figure}
        \begin{subfigure}{0.3\textwidth}
            \centering
            \includegraphics[height=1cm]{../img/logoTUM.png}\\
            \vspace*{1cm}
            \includegraphics[height=1.5cm]{../img/logoisabelle.png}
        \end{subfigure}
        \begin{subfigure}{0.69\textwidth}
            \centering
            \includegraphics[height=6cm]{img/TUM.jpeg}
        \end{subfigure}
        \caption{Technical University of Munich (TUM), Garching campus}
    \end{figure}
    }
\end{frame}

\begin{frame}
\onslide<+->{
\begin{figure}
    \centering
    \includegraphics[height=3cm]{img/beer0.jpeg}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer1.jpeg}}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer2.jpeg}}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer3.jpeg}}\\
    \vfill
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer4.jpeg}}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer5.jpeg}}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer6.jpeg}}
    \onslide<+->{\includegraphics[height=3.2cm]{img/beer7.jpeg}}
\end{figure}
}
\end{frame}

\section{Hopcroft's algorithm}

\begin{frame}
    \tableofcontents[currentsection]
\end{frame}

\subsection{DFA minimization by example}
\begin{frame}
    \centering
    \onslide<1->{
    \begin{tikzpicture}[shorten >=1pt,node distance=2.5cm, on grid, >={Stealth[round]},initial text=,
        every state/.style={draw=maincolor,very thick,fill=maincolor!20}]
     
        \only<1-4>{\node[state, initial] (q0) {$q_0$}};
        \only<5->{\node[state, initial, fill=orange!60, draw=orange!90!black] (q0) {$q_0$}};

        \only<1-4>{\node[state, above of=q0] (q1) {$q_1$}};
        \only<5->{\node[state, above of=q0, fill=orange!60, draw=orange!90!black] (q1) {$q_1$}};
        \only<1-4>{\node[state, accepting, right of=q0] (q2) {$q_2$}};
        \only<5->{\node[state, accepting, right of=q0, fill=blue!40, draw=blue!70] (q2) {$q_2$}};

        \only<1-4>{\node[state, accepting, above of=q2] (q3) {$q_3$}};
        \only<5->{\node[state, accepting, above of=q2, fill=blue!40, draw=blue!70] (q3) {$q_3$}};

        \only<1-4>{\node[state, accepting, right of=q2] (q4) {$q_4$}};
        \only<5->{\node[state, accepting, right of=q2, fill=blue!40, draw=blue!70] (q4) {$q_4$}};
        \only<1-4>{\node[state, right of=q3] (q5) {$q_5$}};
        \only<5>{\node[state, right of=q3, fill=orange!60, draw=orange!90!black] (q5) {$q_5$}};
        \only<6->{\node[state, right of=q3] (q5) {$q_5$}};

        \path[->] (q0) edge[bend left] node[left]{$\alpha$} (q1);
        \path[->] (q0) edge node[below]{$\beta$} (q2);
        \path[->] (q1) edge[bend left] node[right]{$\alpha$} (q0);
        \path[->] (q1) edge node[above]{$\beta$} (q3);
        \path[->] (q2) edge node[below]{$\alpha$} (q4);
        \path[->] (q2) edge node[left=.3cm]{$\beta$} (q5);
        \path[->] (q3) edge node[above]{$\beta$} (q5);
        \path[->] (q3) edge node[above=.3cm]{$\alpha$} (q4);
        \path[->] (q4) edge[loop right] node[right]{$\alpha$} (q4);
        \path[->] (q4) edge node[right]{$\beta$} (q5);
        \path[->] (q5) edge[loop right] node[right]{$\alpha,\beta$} (q5);
    \end{tikzpicture}
    }

    \only<1-8>{
    \begin{table}
        \centering
        \small
        \only<1-4>{
            \begin{itemize}
                \item<2-> Successively partitions the set of states into equivalence classes
                \item<3-> Initial partition: accepting and non-accepting states
                \item<4-> Each iteration: pick a splitter and split all blocks of the current partition
            \end{itemize}
        }
        \only<5-8>{\begin{tabular}{c|c|c}
            Splitter & Partition & Workset\\
            \hline
            -- & $\{{\color{orange!80!black}q_0,q_1, q_5}\}\{{\color{blue!70}q_2, q_3, q_4}\}$ & $(\alpha, \{{\color{orange!80!black}q_0,q_1, q_5}\})\ (\beta, \{{\color{orange!80!black}q_0,q_1, q_5}\})$\\
            \onslide<6->{$(\beta, \{{\color{orange!80!black}q_0,q_1, q_5}\})$ & $\{{\color{orange!80!black}q_0,q_1}\}\{{\color{maincolor!80!black}q_5}\}\{{\color{blue!70}q_2, q_3, q_4}\}$ & $(\alpha, \{{\color{orange!80!black}q_0,q_1}\})\ (\alpha, \{{\color{maincolor!80!black}q_5}\})$}\\
            \onslide<7->{$(\alpha, \{{\color{orange!80!black}q_0,q_1}\})$ & $\{{\color{orange!80!black}q_0,q_1}\}\{{\color{maincolor!80!black}q_5}\}\{{\color{blue!70}q_2, q_3, q_4}\}$ & $(\alpha, \{{\color{maincolor!80!black}q_5}\})$}\\
            \onslide<8->{$(\alpha, \{{\color{maincolor!80!black}q_5}\})$ & $\{{\color{orange!80!black}q_0,q_1}\}\{{\color{maincolor!80!black}q_5}\}\{{\color{blue!70}q_2, q_3, q_4}\}$ & $\varnothing$}\\
        \end{tabular}}
    \end{table}
    }

    \only<9>{
    \begin{tikzpicture}[shorten >=1pt,node distance=2.5cm, on grid, >={Stealth[round]},initial text=,
        every state/.style={draw=maincolor,very thick,fill=maincolor!20}]
        
        \node[state, initial, draw=orange!90!black, fill=orange!60] (Q0) {$q_0, q_1$};
        \node[state, accepting, right of=Q0, draw=blue!70, fill=blue!40] (Q1) {$q_2,q_3,q_4$};
        \node[state, right of=Q1] (Q2) {$q_5$};
        
        % Invisible for alignment
        \node[draw=none, right of=Q2, xshift=-0.5cm] (Q2text) {$\mathcal{L} = \alpha^*\beta\alpha^*$};

        \path[->] (Q0) edge[loop above] node[above]{$\alpha$} (Q0);
        \path[->] (Q0) edge node[above]{$\beta$} (Q1);
        \path[->] (Q1) edge[loop above] node[above]{$\alpha$} (Q1);
        \path[->] (Q1) edge node[above]{$\beta$} (Q2);
        \path[->] (Q2) edge[loop above] node[above]{$\alpha,\beta$} (Q2);
    \end{tikzpicture}
    }
\end{frame}

\subsection{Towards a formal definition...}

\begin{frame}
    Formalization
\end{frame}

\end{document}